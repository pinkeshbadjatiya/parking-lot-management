{% extends "base.html" %}
{% block content %}
<form method=post>
	<div style="margin-bottom:20px">
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" href="{{url_for('admin.show_dashboard')}}">Dashboard</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="{{url_for('authentication.logout')}}">Log Out</a>
				</li>
			</ul>
		</div>
	</nav>
	</div>

	<h5>View Price Snapshot for: </h5>
	<div class="input-group" style="margin-bottom:20px">
		<div class="input-group-prepend">
			<label class="input-group-text" for="inputPLSelect">Parking Lot</label>
		</div>
		<select class="custom-select" name="inputPLSelect" required>
		{% for item in parkinglotList %}
			{% if item == spl %}
				<option selected>{{item}}</option>
			{% else %}
				<option>{{item}}</option>
			{% endif %}
		{% endfor %}
		</select>
	</div>

	<div class="input-group" style="margin-bottom:20px">
		<button name="button" class="btn btn-primary btn-block" type="submit" value="view_pricesnapshot">View PriceSnapshot</button>
	</div>

	{% if priceDataPresent %}
	<div>
		<h2>{{parkinglotname}}</h2>
		<table id='price_table'>
			{% for day in pricesnapshot %}
				<tr>
					<td> WeekDay {{loop.index}} </td>
					{% for hour in day %}
						<td class='charge_cell'> {{hour}} </td>
					{% endfor %}
				</tr>
			{% endfor %}
		</table>
	</div>
	{% endif %}

	{% if message %}
	<div>
		<p><b> NOTE: {{message}} </b></h3>
	</div>
	{% endif %}



  </form>

	<script>
			$(function () {
		    $(".charge_cell").dblclick(function (e) {
		        e.stopPropagation();
		        var currentEle = $(this);
		        var value = $(this).html();
		        updateVal(currentEle, value);
		    });
		});

		function updateVal(currentEle, value) {
		    $(currentEle).html('<input class="thVal" type="text" value="' + value + '" />');
		    $(".thVal").focus();
		    $(".thVal").keyup(function (event) {
		        if (event.keyCode == 13) {
		            $(currentEle).html($(".thVal").val().trim());
		        }
		    });

		    $(document).click(function () {
		            $(currentEle).html($(".thVal").val().trim());
		    });
		}

  </script>
{% endblock %}
